<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balance Management System</title>
</head>
<body>
    <h1>Balance Management System</h1>
    <p>Your UUID: <strong>{{ user_uuid }}</strong></p>
    <p>Balance: <strong>{{ balance }}</strong></p>

    {% if flask_env == 'development' %}
    <p><em>Note: You are in development mode. Certain actions are allowed for testing purposes.</em></p>
    {% endif %}

    <h2>Buy Balance</h2>
    <form action="/buy_balance" method="POST">
        <label for="balance_pack">Select Balance Pack:</label>
        <select name="balance_pack" id="balance_pack" required>
        {% if balance_packs %}
            {% for pack, price in balance_packs.items() %}
            <option value="{{ pack }}">{{ pack }} Balance - {{ price }} Currency Unit</option>
            {% endfor %}
        {% else %}
            <p>No balance packs available</p>
        {% endif %}        
        </select><br><br>
        <label for="coupon_code">Coupon Code (optional):</label>
        <input type="text" name="coupon_code" id="coupon_code"><br><br>
        <button type="submit">Buy Balance</button>
    </form>    

    <h2>Use Balance</h2>
    <form action="/use_balance" method="POST">
        <button type="submit">Use Balance</button>
    </form>

    <h2>Access Existing Balance</h2>
    <form action="/access_existing_balance" method="POST">
        <input type="text" name="user_uuid" placeholder="Enter your UUID" required>
        <button type="submit">Access Balance</button>
    </form>

    {% if flask_env == 'development' %}
    <h2>Development Tools for Single User</h2>
    <form action="/reset_balance" method="POST">
        <button type="submit">Reset Balance</button>
    </form>

    <form action="/reset_session" method="POST">
        <button type="submit">Reset Session</button>
    </form>

    <h2>Development Tools for All Users</h2>
    <form action="/reset_all_balances" method="POST">
        <button type="submit">Reset All Balances</button>
    </form>

    <form action="/reset_all_sessions" method="POST">
        <button type="submit">Reset All Sessions</button>
    </form>
    {% endif %}

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
</body>
</html>
